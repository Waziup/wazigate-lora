!function(e){var t={};function a(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.l=!0,l.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t){e.exports=React},function(e,t){e.exports=BabelRuntimeHelpers.interopRequireDefault},function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=r.default.memo(r.default.forwardRef((function(t,a){return r.default.createElement(o.default,(0,l.default)({ref:a},t),e)})));0;return a.muiName=o.default.muiName,a};var l=n(a(6)),r=n(a(0)),o=n(a(7))},function(e,t,a){e.exports=a(4)},function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{i(n.next(e))}catch(e){r(e)}}function u(e){try{i(n.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,u)}i((n=n.apply(e,t||[])).next())}))},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=l(a(0)),u=r(a(5)),i=r(a(8)),c=r(a(9)),d=r(a(10)),s=r(a(12)),f=a(11);hooks.addDeviceMenuHook(e=>{const{device:t,handleMenuClose:a,setDevice:n}=e;return null===t||t.meta.lorawan?null:o.default.createElement(f.MenuItem,{onClick:()=>{a();const e={profile:"WaziDev"};n(t=>Object.assign(Object.assign({},t),{meta:Object.assign(Object.assign({},t.meta),{lorawan:e})})),wazigate.setDeviceMeta(t.id,{lorawan:e})},key:"waziup.wazigate-lora"},o.default.createElement(f.ListItemIcon,null,o.default.createElement(i.default,{fontSize:"small"})),o.default.createElement(f.ListItemText,{primary:"Make LoRaWAN",secondary:"Declare as LoRaWAN device"}))});const m=f.makeStyles(e=>({root:{overflow:"auto",textAlign:"center"},scrollBox:{padding:e.spacing(2),minWidth:"fit-content",maxWidth:650,display:"inline-block",textAlign:"left"},paper:{background:"#d8dee9",minWidth:"fit-content"},header:{color:"#34425a"},name:{flexGrow:1},body:{padding:e.spacing(2)},input:{marginBottom:e.spacing(1)},shortInput:{width:300},longInput:{width:500},footer:{color:"#34425a"},cardBtn:{marginRight:e.spacing(2)}}));function v(e){return e.replace(/[^a-zA-Z0-9]/g,"")}hooks.addDeviceHook(e=>{const t=m(),{device:a,setDevice:l}=e,r=null==a?void 0:a.meta.lorawan,[p,g]=o.useState(null),[h,E]=o.useState(!1),b=e=>{l(t=>Object.assign(Object.assign({},t),{meta:Object.assign(Object.assign({},t.meta),{lorawan:e})}))},y=null!=p,w=Object.assign(Object.assign({devAddr:"",nwkSEncKey:"",appSKey:"",devEUI:"",profile:""},r),p),O=8!==w.devAddr.length?"8 digits required, got "+w.devAddr.length:null,j=32!==w.nwkSEncKey.length?"32 digits required, got "+w.nwkSEncKey.length:null,I=32!==w.appSKey.length?"32 digits required, got "+w.appSKey.length:null,A=16!==w.devEUI.length?"16 digits required, got "+w.devEUI.length:null,M=O||j||I||A,S=e=>"AA555A00"+e;return r?o.default.createElement("div",{className:t.root},o.default.createElement("div",{className:t.scrollBox},o.default.createElement(f.Card,{className:t.paper},o.default.createElement(f.CardHeader,{avatar:o.default.createElement(i.default,null),action:o.default.createElement(f.IconButton,{"aria-label":"remove",onClick:()=>{confirm("Do you want to remove the LoRaWAN settings from this device?")&&wazigate.setDeviceMeta(a.id,{lorawan:null}).then(()=>{b(null),g(null)},e=>{alert(e)})}},o.default.createElement(u.default,null)),title:"LoRaWAN Settings"}),o.default.createElement(f.CardContent,null,o.default.createElement(f.FormGroup,null,o.default.createElement(f.FormControl,{className:s.default(t.longInput,t.input)},o.default.createElement(f.InputLabel,{id:"lorawan-profile-label"},"LoRaWAN Profile"),o.default.createElement(f.Select,{labelId:"lorawan-profile-label",id:"lorawan-profile",value:w.profile,onChange:e=>{g(Object.assign(Object.assign({},p),{profile:e.target.value}))}},o.default.createElement(f.MenuItem,{value:"WaziDev"},"WaziDev"),o.default.createElement(f.MenuItem,{value:"Other"},"Other"))),o.default.createElement("br",null),"WaziDev"===((null==p?void 0:p.profile)||(null==r?void 0:r.profile))?o.default.createElement(o.Fragment,null,o.default.createElement(f.FormControl,{error:h&&!!O,className:t.input},o.default.createElement(f.InputLabel,{htmlFor:"lorawan-devaddr"},"DevAddr (Device Address)"),o.default.createElement(f.Input,{id:"lorawan-devaddr",onChange:e=>{const t=v(e.target.value);g(Object.assign(Object.assign({},p),{devEUI:S(t),devAddr:t}))},value:w.devAddr,className:t.shortInput,endAdornment:o.default.createElement(f.InputAdornment,{position:"end"},o.default.createElement(f.Tooltip,{title:"Autogenerate"},o.default.createElement(f.IconButton,{size:"small",onClick:()=>n(void 0,void 0,void 0,(function*(){alert("This feature is not available right now.")}))},o.default.createElement(d.default,null))))}),o.default.createElement(f.FormHelperText,null,O)),o.default.createElement(f.FormControl,{className:t.input,error:h&&!!j},o.default.createElement(f.InputLabel,{htmlFor:"lorawan-nwskey"},"NwkSKey (Network Session Key)"),o.default.createElement(f.Input,{id:"lorawan-nwskey",onChange:e=>{g(Object.assign(Object.assign({},p),{nwkSEncKey:v(e.target.value)}))},value:w.nwkSEncKey,className:t.longInput,endAdornment:o.default.createElement(f.InputAdornment,{position:"end"},o.default.createElement(f.Tooltip,{title:"Autogenerate"},o.default.createElement(f.IconButton,{size:"small",onClick:()=>{const e=()=>{for(var e=new Array(32),t=0;t<32;t++)e[t]="0123456789ABCDEF"[16*Math.random()|0];return e.join("")};g(Object.assign(Object.assign({},p),{nwkSEncKey:e(),appSKey:e()}))}},o.default.createElement(d.default,null))))}),o.default.createElement(f.FormHelperText,null,j)),o.default.createElement(f.TextField,{id:"lorawan-appkey",label:"AppKey (App Key)",onChange:e=>{g(Object.assign(Object.assign({},p),{appSKey:v(e.target.value)}))},value:w.appSKey,className:s.default(t.longInput,t.input),helperText:I,error:h&&!!I})):o.default.createElement(f.TextField,{id:"lorawan-deveui",label:"Device EUI",onChange:e=>{g(Object.assign(Object.assign({},p),{devEUI:v(e.target.value)}))},value:w.devEUI,className:s.default(t.longInput,t.input),helperText:A,error:h&&!!A}))),o.default.createElement(f.CardActions,{className:t.footer},o.default.createElement(f.Grow,{in:y},o.default.createElement(f.Button,{className:t.cardBtn,variant:"contained",color:"primary",onClick:()=>{E(!0),M||wazigate.setDeviceMeta(a.id,{lorawan:w}).then(()=>{b(w),g(null)},e=>{alert(e)})},startIcon:o.default.createElement(c.default,null)},"Save")),o.default.createElement(f.Grow,{in:y,timeout:{enter:500,exit:200}},o.default.createElement(f.Button,{className:t.cardBtn,onClick:()=>{g(null)}},"Reset")))))):null}),hooks.resolve()},function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(2)).default)(l.default.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");t.default=r},function(e,t){e.exports=BabelRuntimeHelpers.extends},function(e,t){e.exports=MaterialUI.SvgIcon},function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(2)).default)(l.default.createElement("path",{d:"M20.2 5.9l.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2s3 .6 4.2 1.7zm-.9.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4l.8.8c.7-.7 1.6-1 2.5-1 .9 0 1.8.3 2.5 1l.8-.8zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zM8 18H6v-2h2v2zm3.5 0h-2v-2h2v2zm3.5 0h-2v-2h2v2z"}),"Router");t.default=r},function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(2)).default)(l.default.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.default=r},function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(2)).default)(l.default.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutline");t.default=r},function(e,t){e.exports=MaterialUI},function(e,t,a){"use strict";function n(e){var t,a,l="";if(e)if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(l&&(l+=" "),l+=a);else for(t in e)e[t]&&(a=n(t))&&(l&&(l+=" "),l+=a);else"boolean"==typeof e||e.call||(l&&(l+=" "),l+=e);return l}a.r(t),t.default=function(){for(var e,t=0,a="";t<arguments.length;)(e=n(arguments[t++]))&&(a&&(a+=" "),a+=e);return a}}]);
//# sourceMappingURL=hook.js.map